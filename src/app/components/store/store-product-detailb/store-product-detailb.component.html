<div class="grid">
    <div class="col-12">
        <div class="card">
            <span style="font-size: 15px; display: block; color: #0e6e13;">> {{this.menuLabel}}</span>
            <span style="font-size: 25px; display: block;">รายการรับเข้าประจำวันที่ {{this.date_input}}</span>
            <li class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"></li>

            <p-table 
                #historyTB
                [value]="productData"
                dataKey="pw_id" 
                [rows]="20"
                [rowHover]="true" 
                styleClass="p-datatable-gridlines p-datatable-striped"
                [paginator]="true"
                [globalFilterFields]="['product_id', 'pg_id', 'product_detail', 'pu_name', 'product_received', 'product_remain', 'product_price']"
            >
                <ng-template pTemplate="caption">
                    <div class="flex justify-content-end flex-column sm:flex-row">
                        <span class="p-input-icon-left mb-2">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" #filter (input)="onGlobalFilter(historyTB, $event)" placeholder="Search Keyword" class="w-full" id="search"/>
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr pSortableColumn="product_id">
                        <th>
                            <div class="flex justify-content-between align-items-center">
                                รหัสสินค้า
                                <p-sortIcon field="product_id"></p-sortIcon>
                            </div>
                        </th>
                        <th pSortableColumn="pg_id">
                            <div class="flex justify-content-between align-items-center">
                                กลุ่มสินค้า
                                <p-sortIcon field="pg_id"></p-sortIcon>
                            </div>
                        </th>
                        <th pSortableColumn="product_detail" style="width: 30%;">
                            <div class="flex justify-content-between align-items-center">
                                รายละเอียด
                                <p-sortIcon field="product_detail"></p-sortIcon>
                            </div>
                        </th>
                        <th pSortableColumn="pu_name">
                            <div class="flex justify-content-between align-items-center">
                                หน่วยนับ
                                <p-sortIcon field="pu_name"></p-sortIcon>
                            </div>
                        </th>
                        <th pSortableColumn="product_received">
                            <div class="flex justify-content-between align-items-center">
                                ปริมาณรับเข้า
                                <p-sortIcon field="product_received"></p-sortIcon>
                            </div>
                        </th>
                        <th pSortableColumn="product_remain">
                            <div class="flex justify-content-between align-items-center">
                                คงเหลือ
                                <p-sortIcon field="product_remain"></p-sortIcon>
                            </div>
                        </th>
                        <th pSortableColumn="product_price">
                            <div class="flex justify-content-between align-items-center">
                                ราคาเฉลี่ย
                                <p-sortIcon field="product_price"></p-sortIcon>
                            </div>
                        </th>
                        <th>
                            <div class="flex justify-content-center align-items-center">
                                <i class="pi pi-trash" style="color: red"></i>
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-data>
                    <tr>
                        <td class="text-center">{{data.product_id}}</td>
                        <td class="text-center">{{data.pg_id}}</td>
                        <td>{{data.product_detail}}</td>
                        <td>{{data.pu_name}}</td>
                        <td class="text-center">{{data.product_received}}</td>
                        <td class="text-center">{{data.product_remain}}</td>
                        <td class="text-center">{{data.product_price}}</td>
                        <td>
                            <div class="flex flex-wrap gap-2 justify-content-center">
                                <p-button 
                                    icon="pi pi-trash" 
                                    severity="danger" 
                                    [rounded]="true" 
                                    [outlined]="true"  
                                    (onClick)="deleteProduct(data.id, data.product_id, data.product_remain, data.stock_id)" 
                                    pTooltip="ลบถาวร"
                                    tooltipPosition="top">
                                </p-button>
                            </div>
                        </td>
                    </tr>
                </ng-template>                  
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8">ไม่พบข้อมูล !!</td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="loadingbody">
                    <tr>
                        <td colspan="8">กำลังโหลดข้อมูล....</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>